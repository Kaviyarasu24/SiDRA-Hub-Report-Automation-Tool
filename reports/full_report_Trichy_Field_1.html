<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1" name="viewport"/>
    <title>SiDRA Hub Crop Report</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <style>
        @media print {
            .page-break {
                page-break-after: always;
            }
        }
        .page {
            margin-bottom: 40px;
        }
    </style>
</head>
<body class="bg-gray-100">
    <!-- PDF Download Button -->
    <div class="fixed top-4 right-4 z-50">
        <button id="downloadPdf" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-lg shadow-lg flex items-center gap-2 transition-colors">
            <i class="fas fa-download"></i>
            Download PDF
        </button>
    </div>
    
    <div id="reportContent">

        <div class="page" id="page1">
            <!-- PDF Download Button -->
  
  
  <div id="reportContent" class="max-w-7xl mx-auto p-6 bg-[#dbe8f2] rounded-3xl relative" style="min-height: 800px; height: auto;">
   <img alt="SiRDA_Logo" class="absolute top-6 left-6 w-[300px] h-[60px] object-contain" height="70" src="../assest/sidralogo.png" width="300"/>
   <img alt="KSRCT_Logo" class="absolute top-6 right-6 w-[60px] h-[60px] object-contain" height="60" src="../assest/ksrctlogo.png " width="60"/>
   <h1 class="text-[72px] font-sans font-normal text-[#1f2937] text-center mt-20 mb-8">
    Crop Report
   </h1>
   <div class="max-w-[600px] mx-auto mt-8 mb-6 rounded-3xl overflow-hidden">
    <img alt="Farmland image" class="w-full h-auto object-cover rounded-3xl" height="300" src="../assest/farmland.png" width="600"/>
   </div>
   <div class="flex justify-center items-center mt-4 mb-6 text-black font-extrabold text-lg">
    <i class="fas fa-map-marker-alt mr-2">
    </i>
    Trichy Field 1 Information
   </div>
   <div class="max-w-4xl mx-auto mt-6 grid grid-cols-2 gap-x-20 gap-y-3 text-[18px] font-sans">
    <div class="space-y-3">
     <div class="text-gray-600 font-semibold">
      <span>Field Name: </span>
      <span class="font-extrabold">Trichy Field 1</span>
     </div>
     <div class="text-gray-600 font-semibold">
      <span>Crop Name: </span>
      <span class="font-extrabold">-</span>
     </div>
     <div class="text-gray-600 font-semibold">
      <span>Sowing Date: </span>
      <span class="font-extrabold">-</span>
     </div>
    </div>
    <div class="space-y-3">
     <div class="text-gray-600 font-semibold">
      <span>Report Date: </span>
      <span class="font-extrabold">2025-08-19</span>
     </div>
     <div class="text-gray-600 font-semibold">
      <span>Area Coverage: </span>
      <span class="font-extrabold">0.59 ha</span>
     </div>
     <div class="text-gray-600 font-semibold">
      <span>Growth Stage: </span>
      <span class="font-extrabold">Not specified</span>
     </div>
    </div>
   </div>
  </div>
   
  </div>
  <!-- Extra padding to ensure all content is captured in PDF -->
  <div class="pb-10"></div>

  
        </div>
        <div class="page-break"></div>

        <div class="page" id="page2">
            <!-- PAGE 2 -->
    <div class="max-w-7xl mx-auto p-6 bg-[#dbe8f2] rounded-3xl relative min-h-[600px] mt-12">
      <div class="flex items-center justify-between mb-4">
        <div class="text-black font-bold text-[15px] leading-5 max-w-[150px]">
          OLD IMAGE DATE:<br/>16/07/2025
        </div>
        <h1 class="text-black font-bold text-2xl leading-6 tracking-tight">
          GREEN HEALTH SCORE (NDVI)
        </h1>
        <div class="flex items-center gap-4">
          <div class="text-black font-bold text-[15px] leading-5 max-w-[150px] text-right">
            NEW IMAGE DATE<br/>16/07/2025
          </div>
          <img alt="Landscape view" class="w-[180px] h-[40px] rounded-lg" height="40" src="../assest/sidralogo.png" width="180"/>
        </div>
      </div>
      
      <!-- Horizontal Line -->
      <div class="border-t border-gray-300 my-2"></div>
      
      <div class="flex justify-between items-center max-w-6xl mx-auto mt-8">
        <!-- Main Content with boxes -->
        <div class="flex items-center justify-between w-full">
          <!-- Left Box -->
          <div class="flex flex-col items-center border-r border-gray-300 pr-4 w-1/3">
            <div class="bg-[#edf3f8] text-gray-700 font-bold text-[14px] rounded-md px-4 py-2 mb-3 inline-block">
              0.18
            </div>
            <img alt="Old NDVI" class="w-[220px] h-[220px] object-cover" height="220" src="../images/Trichy_Field_1\old_ndvi.png" width="220"/>
          </div>
          
          <!-- Middle Arrow -->
          <div class="flex items-center justify-center px-4">
            <div class="text-green-600 font-bold flex">
              <!-- Green chevron arrows pointing right -->
              <div class="flex flex-col">
                <span class="text-[#2e8c42] text-3xl">›››</span>
              </div>
            </div>
          </div>
          
          <!-- Right Box -->
          <div class="flex flex-col items-center border-r border-gray-300 pr-4 w-1/3">
            <div class="bg-[#edf3f8] text-gray-700 font-bold text-[14px] rounded-md px-4 py-2 mb-3 inline-block">
              0.18
            </div>
            <img alt="Current NDVI" class="w-[220px] h-[220px] object-cover" height="220" src="../images/Trichy_Field_1\current_ndvi.png" width="220"/>
          </div>
          
          <!-- Far Right Image -->
          <div class="flex flex-col items-center ml-4 w-1/4">
            <img alt="Field visualization tall" class="w-[160px] h-[280px] object-cover" height="280" src="../assest/farmland.png" width="160"/>
          </div>
        </div>
      </div>
      
      <!-- Horizontal Line -->
      <div class="border-t border-gray-300 my-6"></div>
      
      <!-- Footer Info -->
      <div class="max-w-5xl mx-auto mt-4 text-[16px] font-sans">
        <div class="text-gray-700">
          <p class="font-semibold">
            Green Health Score (NDVI)
          </p>
          <p class="mt-2 font-bold">
            As of July 16, 2025, your land has an NDVI of 0.18, which is very low and indicates bare land or extremely sparse vegetation. Since no crop or sowing date is mentioned, it's likely a bare field. This means there's almost no plant health to speak of. Consider preparing the land for planting soon.
          </p>
        </div>
      </div>
    </div>
        </div>
        <div class="page-break"></div>

        <div class="page" id="page3">
            <!-- PAGE 2 -->
    <div class="max-w-7xl mx-auto p-6 bg-[#dbe8f2] rounded-3xl relative min-h-[600px] mt-12">
      <div class="flex items-center justify-between mb-4">
        <div class="text-black font-bold text-[15px] leading-5 max-w-[150px]">
          OLD IMAGE DATE:<br/>16/07/2025
        </div>
        <h1 class="text-black font-bold text-2xl leading-6 tracking-tight">
          MOISTURE LEVEL INDICATOR (NDMI)
        </h1>
        <div class="flex items-center gap-4">
          <div class="text-black font-bold text-[15px] leading-5 max-w-[150px] text-right">
            NEW IMAGE DATE<br/>16/07/2025
          </div>
          <img alt="Landscape view" class="w-[180px] h-[40px] rounded-lg" height="40" src="../assest/sidralogo.png" width="180"/>
        </div>
      </div>
      
      <!-- Horizontal Line -->
      <div class="border-t border-gray-300 my-2"></div>
      
      <div class="flex justify-between items-center max-w-6xl mx-auto mt-8">
        <!-- Main Content with boxes -->
        <div class="flex items-center justify-between w-full">
          <!-- Left Box -->
          <div class="flex flex-col items-center border-r border-gray-300 pr-4 w-1/3">
            <div class="bg-[#edf3f8] text-gray-700 font-bold text-[14px] rounded-md px-4 py-2 mb-3 inline-block">
              -0.14
            </div>
            <img alt="Old NDMI" class="w-[220px] h-[220px] object-cover" height="220" src="../images/Trichy_Field_1/old_ndmi.png" width="220"/>
          </div>
          
          <!-- Middle Arrow -->
          <div class="flex items-center justify-center px-4">
            <div class="text-green-600 font-bold flex">
              <!-- Green chevron arrows pointing right -->
              <div class="flex flex-col">
                <span class="text-[#2e8c42] text-3xl">›››</span>
              </div>
            </div>
          </div>
          
          <!-- Right Box -->
          <div class="flex flex-col items-center border-r border-gray-300 pr-4 w-1/3">
            <div class="bg-[#edf3f8] text-gray-700 font-bold text-[14px] rounded-md px-4 py-2 mb-3 inline-block">
              -0.14
            </div>
            <img alt="Current NDMI" class="w-[220px] h-[220px] object-cover" height="220" src="../images/Trichy_Field_1/current_ndmi.png" width="220"/>
          </div>
          
          <!-- Far Right Image -->
          <div class="flex flex-col items-center ml-4 w-1/4">
            <img alt="Field visualization tall" class="w-[160px] h-[280px] object-cover" height="280" src="../assest/farmland.png" width="160"/>
          </div>
        </div>
      </div>
      
      <!-- Horizontal Line -->
      <div class="border-t border-gray-300 my-6"></div>
      
      <!-- Footer Info -->
      <div class="max-w-5xl mx-auto mt-4 text-[16px] font-sans">
        <div class="text-gray-700">
          <p class="font-semibold">
            Moisture Level Indicator (NDMI)
          </p>
          <p class="mt-2 font-bold">
            Your field's moisture level is very low (NDMI: -0.14), even with a slight increase (+0.03) since July 16, 2025. This indicates insufficient moisture. Immediate irrigation is highly recommended to prevent crop stress.
          </p>
        </div>
      </div>
    </div>
        </div>
        <div class="page-break"></div>

        <div class="page" id="page4">
            <!-- PAGE 2 -->
    <div class="max-w-7xl mx-auto p-6 bg-[#dbe8f2] rounded-3xl relative min-h-[600px] mt-12">
      <div class="flex items-center justify-between mb-4">
        <div class="text-black font-bold text-[15px] leading-5 max-w-[150px]">
          OLD IMAGE DATE:<br/>16/07/2025
        </div>
        <h1 class="text-black font-bold text-2xl leading-6 tracking-tight">
          LEAF FRESHNESS INDEX (RECI)
        </h1>
        <div class="flex items-center gap-4">
          <div class="text-black font-bold text-[15px] leading-5 max-w-[150px] text-right">
            NEW IMAGE DATE<br/>16/07/2025
          </div>
          <img alt="Landscape view" class="w-[180px] h-[40px] rounded-lg" height="40" src="../assest/sidralogo.png" width="180"/>
        </div>
      </div>
      
      <!-- Horizontal Line -->
      <div class="border-t border-gray-300 my-2"></div>
      
      <div class="flex justify-between items-center max-w-6xl mx-auto mt-8">
        <!-- Main Content with boxes -->
        <div class="flex items-center justify-between w-full">
          <!-- Left Box -->
          <div class="flex flex-col items-center border-r border-gray-300 pr-4 w-1/3">
            <div class="bg-[#edf3f8] text-gray-700 font-bold text-[14px] rounded-md px-4 py-2 mb-3 inline-block">
              0.45
            </div>
            <img alt="Old RECI" class="w-[220px] h-[220px] object-cover" height="220" src="../images/Trichy_Field_1/old_reci.png" width="220"/>
          </div>
          
          <!-- Middle Arrow -->
          <div class="flex items-center justify-center px-4">
            <div class="text-green-600 font-bold flex">
              <!-- Green chevron arrows pointing right -->
              <div class="flex flex-col">
                <span class="text-[#2e8c42] text-3xl">›››</span>
              </div>
            </div>
          </div>
          
          <!-- Right Box -->
          <div class="flex flex-col items-center border-r border-gray-300 pr-4 w-1/3">
            <div class="bg-[#edf3f8] text-gray-700 font-bold text-[14px] rounded-md px-4 py-2 mb-3 inline-block">
              0.45
            </div>
            <img alt="Current RECI" class="w-[220px] h-[220px] object-cover" height="220" src="../images/Trichy_Field_1/current_reci.png" width="220"/>
          </div>
          
          <!-- Far Right Image -->
          <div class="flex flex-col items-center ml-4 w-1/4">
            <img alt="Field visualization tall" class="w-[160px] h-[280px] object-cover" height="280" src="../assest/farmland.png" width="160"/>
          </div>
        </div>
      </div>
      
      <!-- Horizontal Line -->
      <div class="border-t border-gray-300 my-6"></div>
      
      <!-- Footer Info -->
      <div class="max-w-5xl mx-auto mt-4 text-[16px] font-sans">
        <div class="text-gray-700">
          <p class="font-semibold">
             Leaf Freshness Index (RECI)
          </p>
          <p class="mt-2 font-bold">
            Your field's RECI value is 0.45, indicating low leaf greenness. This suggests poor nutrient intake. Since there's no change, consider general fertilizer support to improve crop health and growth.
          </p>
        </div>
      </div>
    </div>
        </div>
        <div class="page-break"></div>

        <div class="page" id="page5">
            <!-- PAGE 2 -->
    <div class="max-w-7xl mx-auto p-6 bg-[#dbe8f2] rounded-3xl relative min-h-[600px] mt-12">
      <div class="flex items-center justify-between mb-4">
        <div class="text-black font-bold text-[15px] leading-5 max-w-[150px]">
          OLD IMAGE DATE:<br/>16/07/2025
        </div>
        <h1 class="text-black font-bold text-2xl leading-6 tracking-tight">
          GROWTH STRENGTH INDEX (MSAVI)
        </h1>
        <div class="flex items-center gap-4">
          <div class="text-black font-bold text-[15px] leading-5 max-w-[150px] text-right">
            NEW IMAGE DATE<br/>16/07/2025
          </div>
          <img alt="Landscape view" class="w-[180px] h-[40px] rounded-lg" height="40" src="../assest/sidralogo.png" width="180"/>
        </div>
      </div>
      
      <!-- Horizontal Line -->
      <div class="border-t border-gray-300 my-2"></div>
      
      <div class="flex justify-between items-center max-w-6xl mx-auto mt-8">
        <!-- Main Content with boxes -->
        <div class="flex items-center justify-between w-full">
          <!-- Left Box -->
          <div class="flex flex-col items-center border-r border-gray-300 pr-4 w-1/3">
            <div class="bg-[#edf3f8] text-gray-700 font-bold text-[14px] rounded-md px-4 py-2 mb-3 inline-block">
              0.15
            </div>
            <img alt="Old MSAVI" class="w-[220px] h-[220px] object-cover" height="220" src="../images/Trichy_Field_1/old_msavi.png" width="220"/>
          </div>
          
          <!-- Middle Arrow -->
          <div class="flex items-center justify-center px-4">
            <div class="text-green-600 font-bold flex">
              <!-- Green chevron arrows pointing right -->
              <div class="flex flex-col">
                <span class="text-[#2e8c42] text-3xl">›››</span>
              </div>
            </div>
          </div>
          
          <!-- Right Box -->
          <div class="flex flex-col items-center border-r border-gray-300 pr-4 w-1/3">
            <div class="bg-[#edf3f8] text-gray-700 font-bold text-[14px] rounded-md px-4 py-2 mb-3 inline-block">
              0.15
            </div>
            <img alt="Current MSAVI" class="w-[220px] h-[220px] object-cover" height="220" src="../images/Trichy_Field_1/current_msavi.png" width="220"/>
          </div>
          
          <!-- Far Right Image -->
          <div class="flex flex-col items-center ml-4 w-1/4">
            <img alt="Field visualization tall" class="w-[160px] h-[280px] object-cover" height="280" src="../assest/farmland.png" width="160"/>
          </div>
        </div>
      </div>
      
      <!-- Horizontal Line -->
      <div class="border-t border-gray-300 my-6"></div>
      
      <!-- Footer Info -->
      <div class="max-w-5xl mx-auto mt-4 text-[16px] font-sans">
        <div class="text-gray-700">
          <p class="font-semibold">
               Growth Strength Index (MSAVI)
          </p>
          <p class="mt-2 font-bold">
            Your MSAVI value is 0.15, with a positive change of 0.03. This indicates improving but still sparse vegetation cover. Continue to monitor for uneven growth; consider field leveling in bare areas or targeted weed control to improve overall crop uniformity.
          </p>
        </div>
      </div>
    </div>
        </div>
        <div class="page-break"></div>

        <div class="page" id="page6">
            <!-- PAGE 2 -->
    <div class="max-w-7xl mx-auto p-6 bg-[#dbe8f2] rounded-3xl relative min-h-[600px] mt-12">
      <div class="flex items-center justify-between mb-4">
        <div class="text-black font-bold text-[15px] leading-5 max-w-[150px]">
          OLD IMAGE DATE:<br/>16/07/2025
        </div>
        <h1 class="text-black font-bold text-2xl leading-6 tracking-tight">
          EARLY STRESS CHECKER (NDRE)
        </h1>
        <div class="flex items-center gap-4">
          <div class="text-black font-bold text-[15px] leading-5 max-w-[150px] text-right">
            NEW IMAGE DATE<br/>16/07/2025
          </div>
          <img alt="Landscape view" class="w-[180px] h-[40px] rounded-lg" height="40" src="../assest/sidralogo.png" width="180"/>
        </div>
      </div>
      
      <!-- Horizontal Line -->
      <div class="border-t border-gray-300 my-2"></div>
      
      <div class="flex justify-between items-center max-w-6xl mx-auto mt-8">
        <!-- Main Content with boxes -->
        <div class="flex items-center justify-between w-full">
          <!-- Left Box -->
          <div class="flex flex-col items-center border-r border-gray-300 pr-4 w-1/3">
            <div class="bg-[#edf3f8] text-gray-700 font-bold text-[14px] rounded-md px-4 py-2 mb-3 inline-block">
              0.1
            </div>
            <img alt="Old NDRE" class="w-[220px] h-[220px] object-cover" height="220" src="../images/Trichy_Field_1/old_ndre.png" width="220"/>
          </div>
          
          <!-- Middle Arrow -->
          <div class="flex items-center justify-center px-4">
            <div class="text-green-600 font-bold flex">
              <!-- Green chevron arrows pointing right -->
              <div class="flex flex-col">
                <span class="text-[#2e8c42] text-3xl">›››</span>
              </div>
            </div>
          </div>
          
          <!-- Right Box -->
          <div class="flex flex-col items-center border-r border-gray-300 pr-4 w-1/3">
            <div class="bg-[#edf3f8] text-gray-700 font-bold text-[14px] rounded-md px-4 py-2 mb-3 inline-block">
              0.1
            </div>
            <img alt="Current NDRE" class="w-[220px] h-[220px] object-cover" height="220" src="../images/Trichy_Field_1/current_ndre.png" width="220"/>
          </div>
          
          <!-- Far Right Image -->
          <div class="flex flex-col items-center ml-4 w-1/4">
            <img alt="Field visualization tall" class="w-[160px] h-[280px] object-cover" height="280" src="../assest/farmland.png" width="160"/>
          </div>
        </div>
      </div>
      
      <!-- Horizontal Line -->
      <div class="border-t border-gray-300 my-6"></div>
      
      <!-- Footer Info -->
      <div class="max-w-5xl mx-auto mt-4 text-[16px] font-sans">
        <div class="text-gray-700">
          <p class="font-semibold">
               Early Stress Checker (NDRE)
          </p>
          <p class="mt-2 font-bold">
            Your field's nutrient uptake (NDRE) is low (0.1), though slightly increasing. This suggests plants may not be getting enough nutrients. Check your fertilizer schedule and consider applying micronutrient sprays to boost plant health and growth.
          </p>
        </div>
      </div>
    </div>
        </div>
        <div class="page-break"></div>

    </div>

    <script>
        document.getElementById('downloadPdf').addEventListener('click', function() {
            console.log('PDF download button clicked');
            
            // Hide the download button during PDF generation
            this.style.display = 'none';
            
            const element = document.getElementById('reportContent');
            console.log('Report element found:', element);
            
            if (!element) {
                alert('Report content not found!');
                this.style.display = 'flex';
                return;
            }
            
            // Wait for any dynamic content to load
            setTimeout(() => {
                console.log('Starting PDF generation...');
                
                // Optimized options for better PDF quality and reliability
                const opt = {
                    margin: 10,
                    filename: 'sidra_crop_report.pdf',
                    image: { 
                        type: 'jpeg', 
                        quality: 0.98
                    },
                    html2canvas: { 
                        scale: 2,
                        useCORS: true,
                        allowTaint: true,
                        letterRendering: true,
                        backgroundColor: '#dbe8f2'
                    },
                    jsPDF: { 
                        unit: 'mm', 
                        format: 'a4', 
                        orientation: 'portrait'
                    },
                    pagebreak: { mode: ['avoid-all', 'css', 'legacy'] }
                };
                
                // Generate PDF
                html2pdf()
                    .from(element)
                    .set(opt)
                    .save()
                    .then(() => {
                        console.log('PDF generation successful');
                        document.getElementById('downloadPdf').style.display = 'flex';
                    })
                    .catch((error) => {
                        console.error('PDF generation failed:', error);
                        document.getElementById('downloadPdf').style.display = 'flex';
                        alert('PDF generation failed: ' + error.message);
                    });
            }, 500);
        });
    </script>
</body>
</html>
